{% extends "article/base.html" %}
{% load static %}

{% block script %}
  {{ block.super }}
  <script src="{% static 'main.js' %}"></script>
{% endblock script %}

{% block style %}
  {{ block.super }}
  <style>

    :root {
      --dark-blue: rgb(27, 52, 116);
    }

    * {
      box-sizing: border-box;
    }

    html, body, main {
      /* Fill the screen. */
      width: 100%;
      height: 100%;
      /* Remove all margins and paddings. */
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }

    body, main {
      display: flex;
      flex-direction: column;
    }

    main {
      /* Set background image. */
      background-image: url("{% static 'photos/pens.jpg' %}");
      background-repeat: no-repeat;
      background-attachment: fixed;
      background-size: cover;
      /* Align items */
      align-items: center;
    }

    .content-container {
      width: 1000px;
      height: 600px;
      max-width: 100%;
      max-height: 100%;
      margin: 20px;
      background-color: rgba(230, 230, 230, 78%);
      box-shadow: rgb(0 0 0 / 25%) 2px 2px 5px;
    }

    .blue-text {
      color: var(--dark-blue);
    }

    .white-text {
      color: white;
    }

  </style>
{% endblock %}

{% block content %}
  <div class="content-container d-flex flex-column justify-content-center align-items-center flex-grow-1">
    {% block stuff %}{% endblock %}
  </div>
          <script>

checkstatus()

function checkstatus() {
  var lav = document.getElementById("useronline-status-icons");


        // AJAX GET request
        $.ajax({
        url: 'https://100014.pythonanywhere.com/en/live_status',
        type: 'GET',
        success: function(data) {
          lav.style.color="green"
        //   lav.innerHTML = JSON.stringify(data);
        },
        error: function(error) {
        //   console.error(error);
         lav.style.color="red"
        }
        });

        // AJAX POST request
        $.ajax({
        url: 'https://100014.pythonanywhere.com/en/live_status',
        type: 'POST',
        data: JSON.stringify({ session_id:{{ request.session.session_id }},product: "Social Media Automation"}),
        contentType: 'application/json',
        success: function(data) {
          console.log(data);
        },
        error: function(error) {
          console.error(error);
        }
        });
        }

        setInterval(checkstatus, 60000);

          </script>
{% endblock %}